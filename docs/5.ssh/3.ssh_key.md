# 鍵認証設定
鍵認証方法によるユーザー認証設定を行います。  
鍵認証には下記のようなメリット・デメリットが考えられます。   

- **メリット**
  - ネットワーク上をパスワードが流れる心配がないのでパスワード認証方式より安全
  - 鍵ファイルとパスフレーズ両方で流出を防ぐ事が出来る
- **デメリット**
  - 前もって鍵ファイルをサーバと登録しておく必要がある。
  - 作業環境分の鍵ファイルコピーや作成を行う必要がある。  

パスワード認証より鍵認証のほうがセキュアだという記事をよく見ますが、サーバ側からすればそうでしょう。  
しかしデメリットの部分を考えてみるとパスワード認証でも鍵認証でも流出が根本の問題となり、  
接続、運用を行う担当者がリスクとなる問題です。  
パスワードだからセキュアではない、鍵認証だからセキュアだという意識ではなく。  
運用担当者は管理できているか、SSHへのアクセス制限は実施しているか、作業端末は固定化しているかなどをまず考えるべきです。  
その上でよりセキュアな通信、接続方法を実施しましょう。  

まず鍵認証を許可するよう設定します。  

```
# vim /etc/ssh/sshd_config
RSAAuthentication yes
PubkeyAuthentication yes
AuthorizedKeysFile     .ssh/authorized_keys
```

SSHを再起動して設定を反映後、鍵交換により接続出来る事を確認します。  
ここでは作業端末での鍵作成、サーバへの秘密鍵登録は割愛します。  

鍵認証による接続が確認できた後、パスワード認証を無効化します。  

```
# vim /etc/ssh/sshd_config
PasswordAuthentication no
ChallengeResponseAuthentication no
```

再度SSHを再起動して設定を反映し、パスワードでSSHログインできない事を確認します。  

```
# sshd -t
# systemctl start sshd
```
